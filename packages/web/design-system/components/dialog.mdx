import { Meta, Title, Subtitle, Description, Primary, Controls, Stories } from '@storybook/blocks'
import * as DialogStories from './dialog.stories'

<Meta of={DialogStories} />

<Title />

<Subtitle>A modal dialog that interrupts the user with important content and expects a response.</Subtitle>

<Description>
  The Dialog component is used to show important information that requires user interaction. It renders content in a
  layer above the main application, with a backdrop that prevents interaction with the underlying content.
</Description>

## Usage

```tsx
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from '@notable/web/design-system/components'

;<Dialog>
  <DialogTrigger asChild>
    <Button>Open Dialog</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Are you sure?</DialogTitle>
      <DialogDescription>This action cannot be undone. This will permanently delete your account.</DialogDescription>
    </DialogHeader>
    <div className='flex justify-end space-x-2'>
      <Button variant='outline'>Cancel</Button>
      <Button variant='destructive'>Delete</Button>
    </div>
  </DialogContent>
</Dialog>
```

## Examples

<Primary />

## Component Structure

The Dialog component consists of several sub-components:

- **Dialog**: The root component that manages state
- **DialogTrigger**: The element that opens the dialog
- **DialogContent**: The dialog container
- **DialogHeader**: Contains the title and description
- **DialogTitle**: The dialog's main heading
- **DialogDescription**: Supplementary description text
- **DialogFooter**: Optional footer for actions

<Stories />

## API Reference

<Controls />

## Common Patterns

### Confirmation Dialog

```tsx
<Dialog>
  <DialogTrigger asChild>
    <Button variant='destructive'>Delete Item</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Delete Item</DialogTitle>
      <DialogDescription>Are you sure you want to delete this item? This action cannot be undone.</DialogDescription>
    </DialogHeader>
    <DialogFooter>
      <DialogClose asChild>
        <Button variant='outline'>Cancel</Button>
      </DialogClose>
      <Button variant='destructive' onClick={handleDelete}>
        Delete
      </Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

### Form Dialog

```tsx
<Dialog>
  <DialogTrigger asChild>
    <Button>Add New Item</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Add New Item</DialogTitle>
      <DialogDescription>Fill in the details below to create a new item.</DialogDescription>
    </DialogHeader>
    <form onSubmit={handleSubmit}>
      <div className='space-y-4 py-4'>
        <Input placeholder='Item name' />
        <Textarea placeholder='Description' />
      </div>
      <DialogFooter>
        <Button type='submit'>Save</Button>
      </DialogFooter>
    </form>
  </DialogContent>
</Dialog>
```

## Best Practices

1. **Clear actions**: Provide clear primary and secondary actions
2. **Focus management**: Ensure focus moves to the dialog and returns properly
3. **Escape handling**: Allow users to close with Escape key
4. **Responsive design**: Ensure dialogs work well on mobile devices
5. **Loading states**: Show loading indicators for async actions

## Accessibility

- Focus trap within the dialog
- Escape key to close
- Click outside to close (configurable)
- ARIA attributes for screen readers
- Proper heading hierarchy
- Keyboard navigation support
